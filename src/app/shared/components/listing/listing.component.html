<app-date (expiryDate)="policyExpiryDate($event)" (policyClaim)="policyClaimInModal($event)" 
            (claimSelected)="onClaimSelection($event)"></app-date>
<div class="border-bottom border-top py-3">
    <div class="container">
        <div class="row">
            <div class="col-md-4">
                <p class="font-weight-bold mb-0">{{userVehicle.vehicleModel}} {{userVehicle.vehicleVariant}}cc
                    <button type="button" class="btn btn-sm btn-outline-primary" (click)="open(vehicle)">
                        <i class="bi bi-pencil"></i>Edit
                    </button>
                </p>
                <span class="small">{{ userVehicle.vehicleType }} | {{userVehicle.fuelType}} |
                    {{userVehicle.rtoCode}}</span>
            </div>
            <div class="col-md-4" *ngIf="!userVehicle.isNewVehicle">
                <span class="text-muted">Existing Policy Expiry Date:</span><br/>{{policyExpireDate | date:'mediumDate'}}</div>
            <div class="col-md-4 small" *ngIf="!userVehicle.isNewVehicle">
                <div ngbDropdown class="d-inline-block w-100">
                    <button class="btn btn-outline-secondary w-100 btn-sm" 
                        id="dropdownForm1" ngbDropdownToggle>NCB not verified</button>
                    <div ngbDropdownMenu aria-labelledby="dropdownForm1" class="p-4 shadow">
                        <p class="mb-0 font-weight-bold small">Did you make a claim in your existing policy?</p>
                        <div class="btn-group btn-group-toggle" ngbRadioGroup name="radioBasic" [(ngModel)]="selectedModalClaim">
                            <label ngbButtonLabel class="btn-primary">
                                <input ngbButton type="radio" name="Y" [value]="1"> Yes
                            </label>
                            <label ngbButtonLabel class="btn-primary">
                                <input ngbButton type="radio" name="N" value="No"> No
                            </label>
                        </div>
                        <p class="mb-0 font-weight-bold small mt-3">Select your existing, No Claim Bonus (NCB)</p>
                        <div class="btn-group btn-group-toggle" ngbRadioGroup name="radioBasic" *ngFor="let bonus of claimBonus; let i = index">
                            <label ngbButtonLabel class="btn-primary">
                                <input ngbButton type="radio" name="i" [value]="0" (click)="selectBonus(bonus)">{{ bonus }}
                            </label>
                        </div>
                        <p class="bg-light border small p-2 mt-3">You are eligible for 50% NCB in your new policy</p>
                        <button ngbDropdownItem class="btn btn-sm btn-danger text-white text-center" (click)="updateNCB()">Update</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="bg-light py-3 mt-3 border-top">

        <div class="container">
            <div class="row">
                <div class="col-md-9">
                    <div class="card shadow-sm mb-3" *ngFor="let quote of quickQuotesInsurer; let i=index">
                        <div class="card-body row">
                            <div class="col-md-3"><img [src]="getIconPath(quote.nameOfInsurer)" /></div>
                            <div class="col-md-3">
                                <p class="text-black-50 mb-0">IDV</p>
                                <h5>&#x20B9;{{ quote.idv }}</h5>
                            </div>
                            <div class="col-md-3">
                                <p class="text-black-50 mb-0">Add ons</p>
                                <span class="small">Zero Dep: Unavailable</span>
                            </div>
                            <div class="col-md-3">
                                <!-- <p class="mb-0 text-d"><del>&#x20B9;2,333</del><span class="ml-2 small"><a
                                            href="#">Policy Coverag</a></span></p> -->
                                <button class="btn btn-danger" (click)="selectPremiumPlan(quote.nameOfInsurer, quote.premium, quote.idv)">
                                    &#x20B9;{{ removeINRInPremium(quote.premium, quote.nameOfInsurer) }}</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-3 bg-white py-2 shadow-sm">
                    <div class="card">
                        <div class="card-header font-weight-bold bg-white">
                            Please Select Insurer
                        </div>
                        <div class="card-body py-2 scroll-y">
                            <ul id="multi-select-demo mb-0" class="small list-insured pl-3">
                                <li class="py-1 list-unstyled">
                                    <input class="form-check-input" type="checkbox" value="selectall" id="selectall" (change)="selectAllInsurer($event)">
                                    <label class="form-check-label text-black-50 font-weight-bold" for="selectall">
                                        Select All
                                    </label>
                                </li>
                                <li class="py-1 list-unstyled" *ngFor="let insurer of insurerList; let i = index">
                                    <input class="form-check-input" type="checkbox" [checked]="insurer.isChecked" [id]="i" (change)="selectInsurer(insurer)">
                                    <label class="form-check-label" [for]="i">
                                        {{ insurer.name }}
                                    </label>
                                </li>
                            </ul>
                        </div>
                        <div class="card-footer text-right bg-light">
                            <button class="btn btn-sm btn-danger" (click)="updateInsurerSelection()">Update</button>
                        </div>
                    </div>

                    <div class="card my-3">
                        <div class="card-header  font-weight-bold bg-white">
                            Set your IDV
                        </div>
                        <div class="card-body py-2">
                            <ul id="multi-select-demo mb-0" class="pl-3">
                                <li class="py-1 list-unstyled" *ngFor="let idv of enumIDV | keyvalue; let i = index">
                                    <input class="form-check-input" type="radio" [id]="i+'-idv'" [checked]="selectedIdv == idv.value"
                                                [value]="idv.key" (change)="onIDVChange(idv.value)">
                                    <label class="form-check-label" [for]="i+'-idv'">
                                        {{ idv.value }}
                                    </label>
                                </li>
                                <li class="py-1 list-unstyled">
                                    <input type="text" class="form-control form-cntrol-sm" placeholder="Enter your IDV" />
                                </li>
                            </ul>
                        </div>
                        <div class="card-footer text-right bg-light">
                            <button class="btn btn-sm btn-danger">Update</button>
                        </div>
                    </div>

                    <div class="card" *ngIf="!userVehicle.isNewVehicle">
                        <div class="card-header  font-weight-bold bg-white">
                            Plan Types
                        </div>
                        <div class="card-body py-2">
                            <p><a href="#" class="link-inherit">All Plans</a></p>
                            <p><a href="#" class="link-inherit">Comprehensive/Standard</a><span
                                    class="d-block text-muted small">Covers your car damage and third party</span></p>
                            <p><a href="#" class="link-inherit">Third Party</a><span
                                    class="d-block text-muted small">Covers third party damage only</span></p>
                        </div>
                    </div>
                    <div class="card my-3" *ngIf="showAddonAccessories()">
                        <div class="card-header bg-white font-weight-bold">
                            Addons & Accessories
                        </div>
                        <div class="card-body scroll-y">
                            <p class="mb-0"><strong>Addons</strong></p>
                            <ul id="multi-select-demo" class="small list-insured pl-3">
                                <li class="py-1 list-unstyled" *ngFor="let addon of enumAddon | keyvalue; let i=index">
                                    <input class="form-check-input" type="checkbox" id="i">
                                    <label class="form-check-label" for="i">
                                        {{ addon.value }}
                                    </label>
                                </li>
                            </ul>
                            <hr />
                            <p class="mb-0"><strong>Accessories</strong></p>
                            <ul id="multi-select-demo" class="small list-insured pl-3">
                                <li class="py-1 list-unstyled" *ngFor="let access of enumAccessory | keyvalue; let i=index">
                                    <input class="form-check-input" type="checkbox" id="i">
                                    <label class="form-check-label" for="i">
                                        {{ access.value }}
                                    </label>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<ng-template #vehicle let-modal>
    <div class="modal-body pt-0">
        <div class="modal-body">
            <p><strong>Please select Vehical Type</strong></p>
            <div class="btn-group mb-3" role="group" aria-label="Basic example">
                <button type="button" class="btn btn-primary btn-sm">Private</button>
                <button type="button" class="btn btn-primary btn-sm">Commercial</button>
            </div>
            <form  [formGroup]="vehicleListForm">
                <p><strong>Maker</strong></p>
                <!-- <ng-template #resultMaker let-r="result" let-t="term">
                    <ngb-highlight [result]="r.Make" [term]="t"></ngb-highlight>
                </ng-template> -->
                <input type="text" formControlName="maker" class="form-control form-control-sm" 
                    [ngbTypeahead]="searchVehicleMaker" />

                <p class="mt-3"><strong>Model</strong></p>
                <input type="text" formControlName="model" class="form-control form-control-sm"  [ngbTypeahead]="searchVehicleModel" />

                <p class="mt-3"><strong>Variant</strong></p>
                <input type="text" formControlName="variant" class="form-control form-control-sm" [ngbTypeahead]="searchVehicleVariant" />

                <p class="mt-3"><strong>Fuel Type</strong></p>
                <input type="text" formControlName="fuel" class="form-control form-control-sm" [ngbTypeahead]="searchVehicleFuel"/>
            </form>
            
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-light" (click)="onSubmitVehicleDetails(modal)">Submit</button>
    </div>
</ng-template>